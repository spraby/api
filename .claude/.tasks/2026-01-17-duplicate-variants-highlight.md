# Подсветка дубликатов вариантов

Дата создания: 2026-01-17

## Описание
Подсветить варианты продукта с одинаковым набором значений опций красным бордером и бледным красным фоном, а также показать баннер над карточками с информацией о дубликатах. Запретить сохранение продуктов с дублирующимися вариантами.

## Чеклист

- [x] Раздел 1: Добавить метод для поиска дубликатов в VariantService
  - [x] Добавить метод `findDuplicateGroups` в `VariantServiceClass`
  - [x] Метод возвращает массив групп индексов вариантов-дубликатов

- [x] Раздел 2: Обновить ProductVariantList
  - [x] Импортировать `DuplicateVariantsAlert`
  - [x] Вычислить группы дубликатов с помощью `useMemo`
  - [x] Раскомментировать и подключить `DuplicateVariantsAlert`
  - [x] Создать Set с индексами дубликатов для быстрой проверки
  - [x] Передать `isDuplicate` prop в `ProductVariantItem`

- [x] Раздел 3: Добавить переводы для алерта
  - [x] Русские переводы уже существуют
  - [x] Английские переводы уже существуют

- [x] Раздел 4: Проверка (первая часть)
  - [x] Запустить линтер `npm run lint`
  - [x] Исправить ошибки форматирования (padding-line-between-statements)

- [x] Раздел 5: Блокировка сохранения при дубликатах
  - [x] Добавить `hasDuplicateVariants` в ProductForm
  - [x] Проверка в `onSubmit` с показом toast.error
  - [x] Отключение кнопки сохранения при наличии дубликатов
  - [x] Добавить переводы для ошибки (en/ru)

- [x] Раздел 6: Финальная проверка
  - [x] Запустить линтер `npm run lint`

## Изменённые файлы

1. `resources/js/admin/services/variant-service.ts` - добавлен метод `findDuplicateGroups()`
2. `resources/js/admin/components/product-variant-list.tsx` - подключена логика дубликатов
3. `resources/js/admin/components/product-form.tsx` - валидация и блокировка сохранения
4. `resources/lang/en/admin.php` - добавлен перевод ошибки
5. `resources/lang/ru/admin.php` - добавлен перевод ошибки
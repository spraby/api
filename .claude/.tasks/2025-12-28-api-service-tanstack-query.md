# –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ API —Å–µ—Ä–≤–∏—Å–∞ —Å TanStack Query

–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2025-12-28
–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 2025-12-28
–°—Ç–∞—Ç—É—Å: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ API —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è React –∞–¥–º–∏–Ω–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫:
- **TanStack Query (React Query)** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ server state, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä—ã
- **Native Fetch API** - HTTP –∫–ª–∏–µ–Ω—Ç —Å Inertia CSRF –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ Axios, –∑–∞—Ç–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ)
- **Custom hooks** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏ –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- **TypeScript** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è API —Å–ª–æ—è

## –§–∏–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
resources/js/admin/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fetch-client.ts    # ‚úÖ Fetch API —Å Inertia CSRF (–∑–∞–º–µ–Ω–∏–ª Axios)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ query-client.ts    # ‚úÖ TanStack Query configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ query-keys.ts      # ‚úÖ Query keys factory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts           # ‚úÖ Error handling utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints/         # API endpoints –ø–æ –¥–æ–º–µ–Ω–∞–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.ts       # ‚úÖ User CRUD endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ README.md          # ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EXAMPLES.md        # ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ hooks/
‚îÇ       ‚îú‚îÄ‚îÄ api/               # Query hooks
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ useUsers.ts    # ‚úÖ useUsers, useUser
‚îÇ       ‚îî‚îÄ‚îÄ mutations/         # Mutation hooks
‚îÇ           ‚îî‚îÄ‚îÄ useUserMutations.ts  # ‚úÖ –í—Å–µ user mutations
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ api.ts                 # ‚úÖ API types –∏ interfaces
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã** - retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏
‚úÖ **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –æ—à–∏–±–æ–∫
‚úÖ **Loading/Error states** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
‚úÖ **–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞** - —É–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚úÖ **DevTools** - –æ—Ç–ª–∞–¥–∫–∞ queries –≤ –±—Ä–∞—É–∑–µ—Ä–µ
‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Inertia** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å Inertia router

## –ß–µ–∫–ª–∏—Å—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- [ ] 1.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@tanstack/react-query` –∏ `@tanstack/react-query-devtools`
- [ ] 1.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `axios` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- [ ] 1.3. –û–±–Ω–æ–≤–∏—Ç—å `tsconfig.json` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—É—Ç–µ–π `@/lib/api/*`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

- [ ] 2.1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `resources/js/admin/lib/api/`
- [ ] 2.2. –°–æ–∑–¥–∞—Ç—å Axios client (`lib/api/client.ts`)
  - [ ] 2.2.1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å base URL
  - [ ] 2.2.2. –î–æ–±–∞–≤–∏—Ç—å request interceptor (auth headers)
  - [ ] 2.2.3. –î–æ–±–∞–≤–∏—Ç—å response interceptor (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
  - [ ] 2.2.4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CSRF token handling
- [ ] 2.3. –°–æ–∑–¥–∞—Ç—å TanStack Query client (`lib/api/query-client.ts`)
  - [ ] 2.3.1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (staleTime, cacheTime, retry)
  - [ ] 2.3.2. –î–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫
  - [ ] 2.3.3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å devtools –¥–ª—è development

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Inertia –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

- [ ] 3.1. –û–±–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `QueryClientProvider` –≤ `app.tsx`
- [ ] 3.2. –î–æ–±–∞–≤–∏—Ç—å `ReactQueryDevtools` –¥–ª—è development
- [ ] 3.3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Inertia router

### 4. –°–æ–∑–¥–∞–Ω–∏–µ API endpoints

- [ ] 4.1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `lib/api/endpoints/`
- [ ] 4.2. –°–æ–∑–¥–∞—Ç—å `endpoints/users.ts`
  - [ ] 4.2.1. `getUsers()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - [ ] 4.2.2. `getUser(id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 4.2.3. `createUser(data)` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 4.2.4. `updateUser(id, data)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 4.2.5. `deleteUser(id)` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 4.2.6. `bulkDeleteUsers(ids)` - –º–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  - [ ] 4.2.7. `bulkUpdateUserRoles(ids, role)` - –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π
- [ ] 4.3. –°–æ–∑–¥–∞—Ç—å TypeScript —Ç–∏–ø—ã –¥–ª—è Users API (`types/api.ts`)

### 5. –°–æ–∑–¥–∞–Ω–∏–µ Custom Hooks

- [ ] 5.1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `lib/hooks/api/`
- [ ] 5.2. –°–æ–∑–¥–∞—Ç—å `hooks/api/useUsers.ts`
  - [ ] 5.2.1. `useUsers()` - query hook –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - [ ] 5.2.2. `useUser(id)` - query hook –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 5.2.3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞
- [ ] 5.3. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `lib/hooks/mutations/`
- [ ] 5.4. –°–æ–∑–¥–∞—Ç—å mutation hooks
  - [ ] 5.4.1. `useCreateUser()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 5.4.2. `useUpdateUser()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 5.4.3. `useDeleteUser()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] 5.4.4. `useBulkDeleteUsers()` - –º–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  - [ ] 5.4.5. `useBulkUpdateUserRoles()` - –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
- [ ] 5.5. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –º—É—Ç–∞—Ü–∏–π
- [ ] 5.6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π
- [ ] 5.7. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å toast notifications (sonner)

### 6. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- [ ] 6.1. –û–±–Ω–æ–≤–∏—Ç—å `Pages/Users.tsx`
  - [ ] 6.1.1. –ó–∞–º–µ–Ω–∏—Ç—å Inertia props –Ω–∞ `useUsers()` hook
  - [ ] 6.1.2. –ó–∞–º–µ–Ω–∏—Ç—å `router.post()` –Ω–∞ `useBulkDeleteUsers()`
  - [ ] 6.1.3. –ó–∞–º–µ–Ω–∏—Ç—å `router.post()` –¥–ª—è —Ä–æ–ª–µ–π –Ω–∞ `useBulkUpdateUserRoles()`
  - [ ] 6.1.4. –î–æ–±–∞–≤–∏—Ç—å loading states
  - [ ] 6.1.5. –î–æ–±–∞–≤–∏—Ç—å error handling UI
- [ ] 6.2. –û–±–Ω–æ–≤–∏—Ç—å `Pages/UserEdit.tsx`
  - [ ] 6.2.1. –ó–∞–º–µ–Ω–∏—Ç—å Inertia props –Ω–∞ `useUser(id)` hook
  - [ ] 6.2.2. –ó–∞–º–µ–Ω–∏—Ç—å `router.put()` –Ω–∞ `useUpdateUser()` mutation
  - [ ] 6.2.3. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - [ ] 6.2.4. –î–æ–±–∞–≤–∏—Ç—å loading states

### 7. –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç –∏ —Ö–µ–ª–ø–µ—Ä–æ–≤

- [ ] 7.1. –°–æ–∑–¥–∞—Ç—å `lib/api/utils.ts`
  - [ ] 7.1.1. `handleApiError()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
  - [ ] 7.1.2. `showSuccessToast()` - —Ö–µ–ª–ø–µ—Ä –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] 7.1.3. `showErrorToast()` - —Ö–µ–ª–ø–µ—Ä –¥–ª—è –æ—à–∏–±–æ–∫
- [ ] 7.2. –°–æ–∑–¥–∞—Ç—å query keys factory (`lib/api/query-keys.ts`)
  - [ ] 7.2.1. `userKeys` - –∫–ª—é—á–∏ –¥–ª—è user queries
  - [ ] 7.2.2. `productKeys` - –∫–ª—é—á–∏ –¥–ª—è product queries (–Ω–∞ –±—É–¥—É—â–µ–µ)

### 8. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- [ ] 8.1. –°–æ–∑–¥–∞—Ç—å `resources/js/admin/lib/api/README.md`
  - [ ] 8.1.1. –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
  - [ ] 8.1.2. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è hooks
  - [ ] 8.1.3. Best practices
  - [ ] 8.1.4. Troubleshooting
- [ ] 8.2. –î–æ–±–∞–≤–∏—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

### 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- [ ] 9.1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Users
- [ ] 9.2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å bulk –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] 9.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] 9.4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- [ ] 9.5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å loading states
- [ ] 9.6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] 9.7. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ production build

### 10. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] 10.1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å prefetching –¥–ª—è Users list
- [ ] 10.2. –î–æ–±–∞–≤–∏—Ç—å pagination support
- [ ] 10.3. –î–æ–±–∞–≤–∏—Ç—å search/filter support —á–µ—Ä–µ–∑ query params
- [ ] 10.4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ (tree-shaking)
- [ ] 10.5. –î–æ–±–∞–≤–∏—Ç—å stale-while-revalidate —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

### 11. –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –±—É–¥—É—â–∏—Ö API

- [ ] 11.1. –°–æ–∑–¥–∞—Ç—å template –¥–ª—è –Ω–æ–≤—ã—Ö endpoints
- [ ] 11.2. –°–æ–∑–¥–∞—Ç—å template –¥–ª—è –Ω–æ–≤—ã—Ö hooks
- [ ] 11.3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ API resource

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

### Query Hook
```tsx
import { useUsers } from '@/lib/hooks/api/useUsers';

export default function Users() {
  const { data: users, isLoading, error } = useUsers();

  if (isLoading) return <Spinner />;
  if (error) return <Error message={error.message} />;

  return <UserList users={users} />;
}
```

### Mutation Hook
```tsx
import { useDeleteUser } from '@/lib/hooks/mutations/useDeleteUser';

export default function UserRow({ user }) {
  const deleteUser = useDeleteUser();

  const handleDelete = () => {
    deleteUser.mutate(user.id, {
      onSuccess: () => {
        toast.success('User deleted');
      }
    });
  };

  return <Button onClick={handleDelete}>Delete</Button>;
}
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **TypeScript**: —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö API —Ñ—É–Ω–∫—Ü–∏–π
- **Error Handling**: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ interceptors
- **Loading States**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TanStack Query
- **Cache Management**: —É–º–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π
- **Optimistic Updates**: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- **Toast Notifications**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å sonner
- **DevTools**: React Query DevTools –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å Inertia.js (–Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π API —Å–ª–æ–π —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
3. –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –±–ª–∞–≥–æ–¥–∞—Ä—è optimistic updates
4. –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö features
5. –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
6. –ì–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ó–ê–í–ï–†–®–ï–ù–û)

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API —Å–µ—Ä–≤–∏—Å–∞**
   - ‚úÖ TanStack Query v5 –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
   - ‚úÖ Fetch client —Å Inertia CSRF (–≤–º–µ—Å—Ç–æ Axios)
   - ‚úÖ Query client —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
   - ‚úÖ Query keys factory
   - ‚úÖ Error handling utilities

2. **User API endpoints** (`lib/api/endpoints/users.ts`)
   - ‚úÖ getUsers() - —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
   - ‚úÖ getUser(id) - –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - ‚úÖ createUser() - —Å–æ–∑–¥–∞–Ω–∏–µ
   - ‚úÖ updateUser() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
   - ‚úÖ deleteUser() - —É–¥–∞–ª–µ–Ω–∏–µ
   - ‚úÖ bulkDeleteUsers() - –º–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - ‚úÖ bulkUpdateUserRoles() - –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π

3. **Custom Hooks**
   - ‚úÖ useUsers() / useUser() - query hooks
   - ‚úÖ useCreateUser() - —Å–æ–∑–¥–∞–Ω–∏–µ
   - ‚úÖ useUpdateUser() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
   - ‚úÖ useDeleteUser() - —É–¥–∞–ª–µ–Ω–∏–µ
   - ‚úÖ useBulkDeleteUsers() - –º–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
   - ‚úÖ useBulkUpdateUserRoles() - –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞
   - ‚úÖ Toast notifications (sonner)

4. **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
   - ‚úÖ Pages/Users.tsx - –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ TanStack Query
   - ‚úÖ Pages/UserEdit.tsx - –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ TanStack Query
   - ‚úÖ Loading states (Skeleton components)
   - ‚úÖ Error handling (Alert components)

5. **Backend API endpoints** (`UserController.php`)
   - ‚úÖ apiIndex() - GET /users/api
   - ‚úÖ apiShow() - GET /users/{id}/api
   - ‚úÖ apiUpdate() - PUT /users/{id}/api
   - ‚úÖ apiDestroy() - DELETE /users/{id}/api
   - ‚úÖ apiBulkDelete() - POST /users/bulk-delete/api
   - ‚úÖ apiBulkUpdateRole() - POST /users/bulk-update-role/api

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - ‚úÖ README.md - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - ‚úÖ EXAMPLES.md - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
   - ‚úÖ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö

7. **Cleanup (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —à–∞–≥–∏)**
   - ‚úÖ –£–¥–∞–ª—ë–Ω Axios dependency
   - ‚úÖ –£–¥–∞–ª—ë–Ω lib/api/client.ts (deprecated)
   - ‚úÖ –£–¥–∞–ª—ë–Ω lib/api/inertia-client.ts (unused)
   - ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**–ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω**: Axios + TanStack Query
**–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: Native Fetch API + TanStack Query

**–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Inertia.js –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Å–æ–∑–¥–∞–Ω–∏—é `fetch-client.ts`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π Fetch API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π CSRF —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ Inertia meta-—Ç–µ–≥–∞.

### –§–∞–π–ª—ã:

**–°–æ–∑–¥–∞–Ω–æ:**
- `resources/js/admin/lib/api/fetch-client.ts`
- `resources/js/admin/lib/api/query-client.ts`
- `resources/js/admin/lib/api/query-keys.ts`
- `resources/js/admin/lib/api/utils.ts`
- `resources/js/admin/lib/api/endpoints/users.ts`
- `resources/js/admin/lib/hooks/api/useUsers.ts`
- `resources/js/admin/lib/hooks/mutations/useUserMutations.ts`
- `resources/js/admin/lib/api/README.md`
- `resources/js/admin/lib/api/EXAMPLES.md`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- `resources/js/admin/app.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω QueryClientProvider
- `resources/js/admin/Pages/Users.tsx` - –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ TanStack Query
- `resources/js/admin/Pages/UserEdit.tsx` - –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ TanStack Query
- `app/Http/Controllers/Admin/UserController.php` - –¥–æ–±–∞–≤–ª–µ–Ω—ã API endpoints
- `routes/web.php` - –¥–æ–±–∞–≤–ª–µ–Ω—ã API routes

**–£–¥–∞–ª–µ–Ω–æ:**
- `resources/js/admin/lib/api/client.ts` (Axios client)
- `resources/js/admin/lib/api/inertia-client.ts` (unused)
- `axios` npm dependency

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π API —Å–µ—Ä–≤–∏—Å –Ω–∞ –±–∞–∑–µ TanStack Query v5 –∏ Fetch API:
- ‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π
- üéØ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ö—É–∫–∏
- üé® Loading/Error states
- üîî Toast notifications
- üõ†Ô∏è React Query DevTools
- üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

**–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã (Products, Orders –∏ —Ç.–¥.)**
# Исправить множественные toast уведомления при загрузке/удалении картинок

Дата создания: 2026-01-03
Статус: ✅ Выполнено, готово к тестированию

## Описание
При загрузке или удалении картинки показываются 3 одинаковых уведомления подряд вместо одного.

## Причина проблемы
Дублирование происходило из-за того, что flash-сообщения показывались в двух местах:
1. **AdminLayout.tsx** - глобально через `useEffect` (правильно)
2. **Media.tsx** - напрямую без `useEffect`, что вызывало показ при каждом рендере (неправильно)

## Решение
Удален дублирующий код показа flash-сообщений из `Media.tsx` (строки 39, 48-54):
- Убран импорт `usePage`
- Убраны блоки `if (flash?.success)` и `if (flash?.error)`

Теперь все flash-сообщения обрабатываются только в `AdminLayout.tsx` глобально.

## Чеклист

- [x] **Раздел 1: Исследование проблемы**
  - [x] Найти где отображаются toast уведомления в React админке
  - [x] Проверить MediaController.php на дублирование flash-сообщений
  - [x] Проверить Inertia middleware на дублирование
  - [x] Проверить компоненты React на множественные рендеры toast
  - [x] Определить источник дублирования

- [x] **Раздел 2: Исправление бэкенда**
  - [x] Убедиться, что контроллер возвращает только одно flash-сообщение (бэкенд был в порядке)

- [x] **Раздел 3: Исправление фронтенда**
  - [x] Найти компонент, отвечающий за отображение toast
  - [x] Исправить логику отображения toast (убрать дублирование из Media.tsx)
  - [x] Проверить другие страницы на дублирование (Users.tsx, Products.tsx - все в порядке)

- [x] **Раздел 4: Линтинг**
  - [x] Запустить `npm run lint`
  - [x] Исправить ошибки (убран неиспользуемый импорт `usePage`)

- [ ] **Раздел 5: Тестирование пользователем**
  - [ ] Протестировать загрузку одной картинки
  - [ ] Протестировать загрузку нескольких картинок
  - [ ] Протестировать удаление картинки
  - [ ] Убедиться что показывается только 1 уведомление

## Изменённые файлы
- `resources/js/admin/Pages/Media.tsx` - убрано дублирование flash messages